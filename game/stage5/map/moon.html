<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>Moon - Stage</title>
	<style>
		html,body{height:100%;margin:0}
		/* stage-wrap uses parent's 100% height so canvases percentage heights sum to 100% */
		#stage-wrap{display:flex;flex-direction:column;height:100%}
		canvas{display:block;width:100%;}
		#gameCanvas{height:80%;background:#000}
		#notesCanvas{height:20%;background:transparent}
	</style>
</head>
<body>
	<div id="stage-wrap">
		<canvas id="gameCanvas" aria-label="Game Canvas"></canvas>
		<canvas id="notesCanvas" aria-label="Notes Canvas"></canvas>
	</div>

	<!-- 공통 유틸/오버레이 (paths relative to this file) -->
	<script src="../../util.js"></script>
	<script src="../../clear.js"></script>
	<script src="../../fail.js"></script>

	<!-- Stage5 modules (parent directory) -->
	<script src="../js/input.js"></script>
	<script src="../js/player.js"></script>
	<script src="../js/judgement.js"></script>ㅇ
	<script src="../js/renderer.js"></script>
	<script src="../js/note.js"></script>
	<script src="./moon.js"></script>

	<!-- Resize helper to keep canvas pixel sizes in sync -->
	<script>
	(function(){
		function resizeCanvases(){
			const dpr = window.devicePixelRatio || 1;
			const game = document.getElementById('gameCanvas');
			const notes = document.getElementById('notesCanvas');
			const gameRect = game.getBoundingClientRect();
			const notesRect = notes.getBoundingClientRect();
			game.width = Math.round(gameRect.width * dpr);
			game.height = Math.round(gameRect.height * dpr);
			notes.width = Math.round(notesRect.width * dpr);
			notes.height = Math.round(notesRect.height * dpr);
			const gctx = game.getContext('2d');
			const nctx = notes.getContext('2d');
			if (gctx) gctx.setTransform(dpr,0,0,dpr,0,0);
			if (nctx) nctx.setTransform(dpr,0,0,dpr,0,0);
		}
		window.addEventListener('resize', resizeCanvases);
		window.addEventListener('load', resizeCanvases);
	})();
	</script>
</body>
</html>
